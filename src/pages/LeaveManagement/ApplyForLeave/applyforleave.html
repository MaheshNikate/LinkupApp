



<ion-content padding>
<br>
<br>
<br>
<br>

<!--<ion-card>
  <ion-card-header>
    Apply Leave
  </ion-card-header>
</ion-card>-->

<ion-card>
  <ion-card-header (click)="showMyLeaves()">
   <ion-item>
        My Leaves
        <button ion-button icon-only item-right clear>
        <ion-icon *ngIf= "isShowMyLeave == false" name="arrow-dropdown" item-right></ion-icon>
        <ion-icon *ngIf= "isShowMyLeave == true" name="arrow-dropleft" item-right ></ion-icon>
      </button>
      </ion-item>
  </ion-card-header>
  <ion-card-content *ngIf="isShowMyLeave == true">
     <ion-row>
      <ion-col width-70>
        <p>Leave Type</p>
        <br>
        <p>Leave</p>
        <br>
        <p>Half Day Leave</p>
        <br>
        <p>Absent</p>
        <br>
        <p>Half Day Absent</p>
        <br>
      </ion-col>
      <ion-col width-15>
        <p>Taken</p>
        <br>
        <p>{{leaveDetail.LeaveTaken}}</p>
        <br>
        <p>{{leaveDetail.HalfdayLeaveTaken}}</p>
        <br>
        <p>{{leaveDetail.AbsentTaken}}</p>
        <br>
        <p>{{leaveDetail.HalfdayAbsentTaken}}</p>
        <br>
      </ion-col>
      <ion-col width-15>
        <p>Balance</p>
        <br>
        <p>{{leaveDetail.LeaveBalance}}</p>
        <br>
        <p>--</p>
        <br>
        <p>--</p>
        <br>
        <p>--</p>
        <br>
      </ion-col>
     </ion-row>
  </ion-card-content>
</ion-card>

<ion-list>
    <ion-list-header>
    <h2> Active on Projects </h2>
  </ion-list-header>
  <ion-item *ngFor="let project of activeProjects">
    <h2>{{ project.Title }}</h2>
    <p>{{ project.ProjectManager.Name }}</p>

  </ion-item>
</ion-list>


<ion-card>
  <ion-card-header (click)="showMyLeaves()">
       Leave Details
  </ion-card-header>
  <ion-card-content>

  <form [formGroup]="applyLeaveForm">
	 <ion-row>
       <ion-col>
		<ion-list class="list">
      <ion-item>
        <ion-label>Leave Type *</ion-label>
        <ion-select [(ngModel)]="model.leaveType" name ="leavetype" (ionChange)= "validateLeaveType()" formControlName="leaveType">
          <ion-option [value]="leavetype" *ngFor="let leavetype of leaves">{{ leavetype.Type }}</ion-option>
        </ion-select>
         <p ion-text [hidden]="applyLeaveForm.controls.leaveType.valid || submitted == false" color="danger" padding-left>
				Leave type is required.
	      </p> 
     </ion-item>
			<ion-item >
				<!--<ion-label floating color="primary">Number of Leaves *</ion-label>-->
				<!--<ion-input  [disabled]="true" name="numLeaves"
					[ngModel]="model.numDays" required>
				</ion-input>-->
        <h2>Number of Leaves *</h2>
        <h3>{{model.numDays}}</h3>
			</ion-item>
		
			<br>

			<ion-item>
      <ion-label>Start Date *</ion-label>
      <ion-datetime name ="startdate" [(ngModel)]="model.start" displayFormat="MMM DD YYYY"  (ionChange)="startChanged()" formControlName="start"></ion-datetime>
       <p ion-text [hidden]="applyLeaveForm.controls.start.valid || submitted == false" color="danger" padding-left>
				Start Date is required.
	      </p> 
      </ion-item>

      <ion-item>
      <ion-label>End Date *</ion-label>
      <ion-datetime name ="enddate"  [(ngModel)]="model.end" displayFormat="MMM DD YYYY"  (ionChange)="endChanged()" formControlName="end"></ion-datetime>
      <p ion-text [hidden]="applyLeaveForm.controls.end.valid || submitted == false" color="danger" padding-left>
				End Date is required.
	    </p> 
      </ion-item>
	
		
      <ion-item>
        <ion-label>Reason *</ion-label>
        <ion-textarea name ="reason"  [(ngModel)]="model.reason" formControlName="reason" ></ion-textarea>
        <p ion-text [hidden]="applyLeaveForm.controls.reason.valid || submitted == false" color="danger" padding-left>
				Reason is required.
	     </p> 
      </ion-item>
		</ion-list>
       </ion-col>
	 </ion-row>

		<ion-row>
			<ion-col col-50>
				<button [disabled]="applyLeaveForm.invalid || this.isValidationMessage || this.itsWeekend" class="applybutton" (click)="onAddLeave()" type="submit" block>Add Leaves</button>
			</ion-col>
      <ion-col col-50>
				<button [disabled]="applyLeaveForm.invalid || this.isValidationMessage || this.itsWeekend" class="applybutton" (click)="submitForm()" type="submit" block>Submit</button>
			</ion-col >
		</ion-row>
	</form>


  </ion-card-content>
</ion-card>

</ion-content>
